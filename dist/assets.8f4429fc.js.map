{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/AutoPlay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","paused","forEach","plugin","run","mute","unmute","togglePlay","toggleMute","AutoPlay","AutoPause","constructor","threshold","pausedByVisibility","pausedByIntersection","handleIntersection","bind","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","buttonPlay","getElementById","onclick","buttonMute","navigator","serviceWorker","register","catch","err","console","error","message"],"mappings":";;AGAA;;AACA;;AACA;AHFA,AEAA,ADAA,MCAMqB,GFAGrB,ACAAoB,MCAT,CAAgB,CDAhB,GDAA,ACAoB,CDACnB,ACEpB,MDFD,EAA6B;AAC3B,AEAAqB,EAAAA,KFAKpB,KAAL,CEAW,EFAED,CEAC,KFAK,CAACE,EAApB;AACA,AEAE,ADEJiB,ODFOhB,CCEC,CCFCmB,ADEAjB,KDFP,GAAeL,CEAb,ADEJ,CAAmBc,ECFE,CDErB,CDFuB,CAACX,CEApB,ADEqB,MDFR,IAAkB,ACEAG,EDFjC,ICEuB,EAAkB;AEA3C,ADDI,ADEA,MEDEgC,AFCE,CAAChC,ECFAiB,ECCE,EFCI,CEDDQ,AFCEtB,KAAZ,EAAmB,CEDD,CAAC8B,IDDnB,GAA0B,KAA1B,CCCU,CAAuB,OAAvB,CAAd;AHAE,AGCF,ADDI,ADEIjC,IAAAA,EEDFA,CHDCF,EEAEoB,CDEK,CAACf,CEDH,GAAG,CFCP,GDFN,AGCiBV,AFCI,IAAf,MCFJ,GAA4B,KAA5B,ECCW,CAAgB;AHA9B,AGAgCG,ADA7B,ADEC,EEF4BA,EAAE,EAAEoC,GDA5Bb,ECAsB,gBDA3B,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;ACAwCvB,ADCxC,ECDwCA,OAAO,ADC1CwB,ECD4C,CAAC,IAAIR,eDCtD,ECDkD,CDCpB,CCDmB,EAAiB,EDC/BQ,ECDmCP,kBAAJ,EAAjB,ADCnB,CAA4BM,IAA5B,CAAiC,IAAjC,CAA9B;AFCJ3B,AGF+B,ADE5B,ADCCO,CEHW,CAAf,AFGIA,MAAM,CAACC,EDDA,CAACF,CCCR,QDDJ,CAAsBD,YAAtB,GAAqC,YAAY;AAC/C,AGDF,AFEC,CALD,KEGMoC,EHCElC,MAAM,EGDE,CHCC,EGDEyB,QAAQ,CAACU,cAAT,CAAwB,MAAxB,CAAnB;AHEIlC,AEAFO,EAAAA,EFAEP,CEAC,CAACD,EFAE,EAAE,EEAL,EAAS,EFAE,KAAKC,IAAL,EADC;AAEbC,AGFJgC,ADEI,IFAAhC,KAAK,AEAAF,CCFC,CHEC,AGFAoC,IDEP,ADCWvB,EDDE,CGFjB,ADEkBb,GCFG,CHECE,EEAlB,GFAa,AGFUF,EHAV,IGAgB,CAACW,UAAP,EAA3B;AHGIhB,AEAA,IFAAA,KAAK,CEAC2B,CFAC,KAAK3B,EEAE,GFHD,AEGI,IAAI4B,oBAAJ,CAAyB,KAAKJ,kBAA9B,EAAkD;ACDvE,ADCyEH,MCDnEqB,ADCmErB,SAAS,CCDlE,CDCoE,ECDjES,GDCsET,KCD9D,CAACmB,cAAT,CAAwB,MAAxB,CAAnB;AHEI,AEDmE,KAAlD,CAAjB,EFCIhC,KAAJ,GAAY;AACV,AGFNkC,ADCIf,IAAAA,MCDM,CAACc,CDCC,CFCC,AEDAZ,KFCK7B,AGFlB,EDCI,CCDiB,ADCAK,EFCR,CAAWG,GGFGH,ADCA,CAACL,CFCtB,IGF2B,ADC7B,CCD8BiB,UAAP,EAA3B;AHGK,AEADa,IAAAA,CFNa,OEML,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,KAAKL,sBAAnD;ACDJ,ADEG,ICFC,mBAAmBiB,SAAvB,EAAkC;AHE9B,AGDFA,EAAAA,MHCMnC,GGDG,CAACoC,CHCR,CAAUnC,KAAV,EAAiB,IGDnB,CAAwBoC,QAAxB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAkDC,GAAD,IAAS;AHEtD,AGDFC,ADEFxB,EAAAA,ECFEwB,OHCOhD,AGDA,CAACiD,IHCN,CAAWzC,AGDb,CAAcuC,EDEE,CCFC,ADEAf,CFDf,AGDgBkB,GHCGzC,GECL,CCFhB,CHCE,AECwB;AFAzB,AGDF,ADEC,GCJF,EHNe,KEUPwB,KAAK,GAAGD,OAAO,CAAC,CAAD,CAArB;ACDH,ADGG,UAAME,SAAS,GAAGD,KAAK,CAACE,iBAAN,IAA2B,KAAKd,SAAlD;AFFA,QAAIX,MAAJ,GAAa;AACX,AEGF,QAAIwB,KFHK,IEGT,CFHclC,CEGC,IFHN,CAAWU,MAAlB;AACD,AEGC,UAAI,KAAKa,oBAAT,EAA+B;AAC7B,aAAKlB,MAAL,CAAYC,IAAZ;AFhBS,AEiBT,GFjBN,UEiBWiB,oBAAL,GAA4B,KAA5B;AFFN,AEGK,OFHArB,OAAL,CAAaS,OAAb,CAAsBC,MAAD,IAAY;AAC/BA,AEGC,IFHDA,CEFA,KFEM,CAACC,AEGA,GFHP,CAAWR,MAAX;AACD,AEGG,GFLJ,OEKQ,CAAC,KAAKA,MAAL,CAAYK,MAAjB,EAAyB;AFF9B,AEGO,CFtBR,YEsBaL,MAAL,CAAYE,KAAZ;AACA,aAAKgB,oBAAL,GAA4B,IAA5B;AFFRzB,AEGO,WFHI,CAACM,SAAZ,CAAsBE,IAAtB,GAA6B,YAAY;AACvC,AEGG,OFHEN,KAAL,CAAWM,IAAX;AACD,AEGE,CFLH;;AAIAR,AEGE4B,EAAAA,SFHS,CAACtB,SAAZ,CAAsBG,EEGE,GFHxB,AEG2B,GFHG,YAAY;AACxC,AEGE,OFHGP,GEGGkC,EFHR,CAAW3B,KAAX,CEGiB,GAAGuB,QAAQ,CAACM,eAAT,KAA6B,SAA/C;AFFH,CAFD;AEMI,QAAIF,SAAJ,EAAe;AFFnBpC,AEGM,UAAI,CFHC,CAACM,GEGGkB,MFHf,CAAsBR,IAAtB,GAA6B,IEGvB,EAA6B,MFHM;AACvC,AEGM,OFHDd,KAAL,CAAWQ,AEGAH,KFHX,CEGM,CAAYC,CFHC,GEGb,CFHN;AACD,AEGO,CFLR,YEKagB,kBAAL,GAA0B,KAA1B;AACD;AFFPxB,AEGK,KALD,MFEO,AEGA,CFHCM,SAAZ,CAAsBW,MAAtB,GAA+B,YAAY;AACzC,AEGI,OFHCf,GEGG,CAAC,CFHT,CAAWQ,GEGGH,EFHd,GAAmB,CEGV,CAAYK,GFHrB,GEGI,EAAyB;AFF9B,AEGO,CFLR,YEKaL,MAAL,CAAYE,KAAZ;AACA,aAAKe,kBAAL,GAA0B,IAA1B;AFFRxB,AEGO,WFHI,CAACM,SAAZ,CAAsBY,UAAtB,GAAmC,YAAY;AAC7C,AEGG,MFHC,KAAKhB,KAAL,CAAWU,MAAf,EAAuB;AACrB,AEGD,SFHMJ,IAAL;AACD,GAFD,MAEO;AACL,AEhDY,SFgDPC,KAAL;AACD;AACF,CAND,cEQeY;;AFAfrB,WAAW,CAACM,SAAZ,CAAsBa,UAAtB,GAAmC,YAAY;AAC7C,MAAI,KAAKjB,KAAL,CAAWQ,KAAf,EAAsB;AACpB,SAAKO,MAAL;AACD,GAFD,MAEO;AACL,SAAKD,IAAL;AACD;AACF,CAND;;eAQehB","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config) {\n  this.media = config.el;\n  this.plugins = config.plugins || [];\n\n  this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function () {\n  const player = {\n    play: () => this.play(),\n    pause: () => this.pause(),\n    media: this.media,\n    get muted() {\n      return this.media.muted;\n    },\n    set muted(value) {\n      this.media.muted = value;\n    },\n    get paused() {\n      return this.media.paused;\n    },\n  };\n\n  this.plugins.forEach((plugin) => {\n    plugin.run(player);\n  });\n};\n\nMediaPlayer.prototype.play = function () {\n  this.media.play();\n};\n\nMediaPlayer.prototype.pause = function () {\n  this.media.pause();\n};\n\nMediaPlayer.prototype.mute = function () {\n  this.media.muted = true;\n};\n\nMediaPlayer.prototype.unmute = function () {\n  this.media.muted = false;\n};\n\nMediaPlayer.prototype.togglePlay = function () {\n  if (this.media.paused) {\n    this.play();\n  } else {\n    this.pause();\n  }\n};\n\nMediaPlayer.prototype.toggleMute = function () {\n  if (this.media.muted) {\n    this.unmute();\n  } else {\n    this.mute();\n  }\n};\n\nexport default MediaPlayer;\n","function AutoPlay() {\n\n}\n\nAutoPlay.prototype.run = function (player) {\n    if (!player.muted) {\n        player.muted = true;\n    }\n    player.play();\n}\n\nexport default AutoPlay;","class AutoPause {\n  constructor() {\n    this.threshold = 0.25;\n    this.pausedByVisibility = false;\n    this.pausedByIntersection = false;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  }\n\n  run(player) {\n    this.player = player;\n    const observer = new IntersectionObserver(this.handleIntersection, { threshold: this.threshold });\n    observer.observe(player.media);\n\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  }\n\n  handleIntersection(entries) {\n    const entry = entries[0];\n\n    const isVisible = entry.intersectionRatio >= this.threshold;\n\n    if (isVisible) {\n      if (this.pausedByIntersection) {\n        this.player.play();\n        this.pausedByIntersection = false;\n      }\n    } else {\n      if (!this.player.paused) {\n        this.player.pause();\n        this.pausedByIntersection = true;\n      }\n    }\n  }\n\n  handleVisibilityChange() {\n    const isVisible = document.visibilityState === 'visible';\n\n    if (isVisible) {\n      if (this.pausedByVisibility) {\n        this.player.play();\n        this.pausedByVisibility = false;\n      }\n    } else {\n      if (!this.player.paused) {\n        this.player.pause();\n        this.pausedByVisibility = true;\n      }\n    }\n  }\n}\n\nexport default AutoPause;\n","import MediaPlayer from './MediaPlayer.js';\nimport AutoPlay from './plugins/AutoPlay.js';\nimport AutoPause from './plugins/AutoPause.js';\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({ el: video, plugins: [new AutoPlay(), new AutoPause()] });\n\nconst buttonPlay = document.getElementById('play');\nbuttonPlay.onclick = () => player.togglePlay();\n\nconst buttonMute = document.getElementById('mute');\nbuttonMute.onclick = () => player.toggleMute();\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').catch((err) => {\n    console.error(err.message);\n  });\n}\n"]}